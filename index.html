<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="loadbar.css">
	<link rel="stylesheet" href="font-awesome.min.css">
	
	<script type="text/javascript" src="core.js"></script>
	<script type="text/javascript" src="app.js"></script>
	<script type="text/javascript" src="selection.js"></script>
	<script type="text/javascript" src="random.js"></script>
	<script type="text/javascript" src="polyfills.js"></script>
	<script type="text/javascript" src="libs/lzma_worker-min.js"></script>
	<script type="text/javascript" src="libs/aes-js-min.js"></script>
	<script type="text/javascript" src="libs/forge-sha256.min.js"></script>
</head>
<body>
	<canvas id="c"></canvas>
	
	<div id="top">
	
		<span class="b" onclick="api.requestReset()"><i class="fa fa-file-o"></i><b>Новый</b></span>
		<span class="b h">
			<span class="b in" id="load_button" onclick="api.callWindow('load')"><i class="fa fa-folder-o"></i><b>Открыть<span class="hid">...</span></b></span>
			<span class="b in" onclick="api.callWindow('import')"><i class="fa fa-upload"></i><b>Импорт</b></span>
		</span>
		<span class="b h">
			<span class="b in" id="save_button" onclick="api.saveCurrent()"><i class="fa fa-save"></i><b>Сохранить<span class="hid">...</span>
			<span style="float:right" id="is_not_saved">*</span></b></span>
			<span class="b in" onclick="api.callWindow('save')"><i class="fa fa-copy"></i><b>Сохранить как</b></span>
			<span class="b in" onclick="api.callWindow('export')"><i class="fa fa-download"></i><b>Экспорт</b></span>
		</span>
		<span class="b stillsel" id="settings_button" onclick="api.callWindow('settings')"><i class="fa fa-wrench"></i><b>Настройки</b></span>
		<span class="b stillsel" id="side_button" onclick="api.callWindow('side')">
		<i class="fa fa-briefcase"></i><b>Инструменты</b>
		</span>
		
		<span class="b h">
			<span class="b in" id="project_button" onclick="api.callWindow('project')"><i class="fa fa-pencil"></i><b>Проект<span class="hid">...</span></b></span>
			<span class="b in" onclick="api.callWindow('terms')"><i class="fa fa-signal"></i><b>Термы</b></span>
			<span class="b in" onclick="api.callWindow('cases')"><i class="fa fa-archive"></i><b>Кейсы</b></span>
			<span class="b in" onclick="api.callWindow('matrix')"><i class="fa fa-bullseye"></i><b style="font-size:90%">Достижимость</b></span>
			<span class="b in" onclick="api.callWindow('effect')"><i class="fa fa-cogs"></i><b style="font-size:85%">Полный эффект</b></span>
			<span class="b in" onclick="api.callWindow('graphs')"><i class="fa fa-bolt"></i><b>Общий риск</b></span>
		</span>
		
		<span class="b" onclick="api.styleSwitch('night','nightMode',true,true,false);api.forceRedraw = true">
			<i class="fa fa-moon-o night_hide"></i><b class="night_hide">Ночь</b>
			<i class="fa fa-sun-o night_nothide"></i><b class="night_nothide">День</b></span>
		<span class="b" onclick="api.callPopup2(windows.about)"><i class="fa fa-info"></i><b>Информация</b></span>
	</div>
	
	<div id="bottom" class="norm" data-tab-id="bottom">
		<div class="line as">
			<span class="b stillsel sel" onclick="api.settings.bottomHidden=false;api.styleSwitch('bottomHidden','bottomHidden',false,false,false)" data-tab-select="1" data-tab-id="bottom">Элементы</span>
			<span class="b stillsel" onclick="api.settings.bottomHidden=false;api.styleSwitch('bottomHidden','bottomHidden',false,false,false)" data-tab-select="2" data-tab-id="bottom">Связи</span><span class="b debug na" id="debug_viewport"></span>
			<span class="b debug na" id="debug_mouseInfo"></span>
			<span class="b debug" id="debug_idle" onclick="api.overDraw = !api.overDraw"></span>
			<span class="b debug na" id="debug_keyInfo">0</span>
			<span class="b debug na" id="save_timeout">0</span>
			<span class="control" style="float:right">
				<span class="b bnorm bbig" onclick="document.getElementById('bottom').className='hide'"><i class="fa fa-arrow-down"></i><b>Скрыть</b></span>
				<span class="b bhide" onclick="document.getElementById('bottom').className='norm'"><i class="fa fa-arrow-up"></i><b>Показать</b></span>
				<span class="b bnorm" onclick="document.getElementById('bottom').className='big'"><i class="fa fa-arrow-up"></i><b>Развернуть</b></span>
				<span class="b bbig" onclick="document.getElementById('bottom').className='norm'"><i class="fa fa-arrow-down"></i><b>Свернуть</b></span>
			</span>
			<span class="b red" style="float:right; overflow:hidden" onclick="Recompile()" id="is_not_compiled">Не пересчитано</span>
		</div>
		<div class="list">
			<div id="bpad1" class="pad selection" data-tab-id="bottom" data-tab="1" style="display:block"><table class="r" cellspacing="0" rules="all">
						
			</table></div>
			<div id="bpad2" class="pad selection" data-tab-id="bottom" data-tab="2"><table class="r" cellspacing="0" rules="all">
						
			</table></div>
		</div>
	</div>
	
	<div id="messages"></div>
	
	<div id="windows">
		<div id="popUp" class="pu d">
			<div class="back" onclick="api.closePopup()"></div>
			<div class="w sm" style="z-index:9999">
				<div class="cc" style="text-align:center">
					<div class="header" style="font-weight:700;font-size:200%;margin-bottom:20px">Загружается...</div>
					<div class="content" style="padding-bottom:16px"><div id="squaresWaveG" style="margin-bottom:24px"><div id="squaresWaveG_1" class="squaresWaveG"></div><div id="squaresWaveG_2" class="squaresWaveG"></div><div id="squaresWaveG_3" class="squaresWaveG"></div><div id="squaresWaveG_4" class="squaresWaveG"></div><div id="squaresWaveG_5" class="squaresWaveG"></div><div id="squaresWaveG_6" class="squaresWaveG"></div><div id="squaresWaveG_7" class="squaresWaveG"></div><div id="squaresWaveG_8" class="squaresWaveG"></div></div><div id="loadstring" style="font-size:150%"></div></div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					
				</div></div></div></div>
			</div>
		</div>
		
		<div id="settings">
			<div class="w tall">
				<div class="h">
					<span>Настройки</span>
				</div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns" style="">
					<div class="pad" style="display:block">
						<div class="line" style="text-align:center;font-weight:700;font-size:120%;margin-bottom:8px">Интерфейс</div>
						<div class="line">Размер шрифта верхнего меню (0.8 - 2.5): <input type="text" class="b i" id="st_topfontsize" style="width:1.5em">em</div>
						<div class="line">Общий размер шрифта (25% - 200%): <input type="text" class="b i" id="st_glfontsize" style="width:2em">%</div>
						<div class="line">Размеры элементов (7px - 100px): <input type="text" class="b i" id="st_elemsize" style="width:2em">px</div>
						<div class="pad" style="width:calc(60% - 10px);display:inline-block;text-align:left;border:none">
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_grid"> Сетка</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_redGrid"> Красные "нулевые" линии</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_cursor"> Собственный курсор и шрифты</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_transparency"> Графические прибамбасы</label></div>
						</div>
						<div class="pad" style="width:calc(40% - 10px);display:inline-block;text-align:left;border:none">
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_labels"> Подписи у иконок</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_elemLabels"> Подписи у элементов</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_actualNames"> Имена вместо кодов</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_debug"> Режим отладки</label></div>
						</div>
						<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="st_noMultitool"> 3 инструмента редактирования вместо одного</label></div>
					</div>
					<div class="pad" style="display:block">
						<div class="line" style="text-align:center;font-weight:700;font-size:120%;margin-bottom:8px">Цвета элементов</div>
						<div class="table r line"><div class="t3"><div class="t2">
							<span class="t"><span class="b fs colorMode" onclick="api.colorMode(true)">Палитра</span></span>
							<span class="t"><span class="b fs colorMode" onclick="api.colorMode(false)">#RGB</span></span>
						</div></div></div>
						<div class="table r"><div class="t3">
							<div class="t2"><span class="t de">Угрозы</span><span class="t"><input class="b i fs color" type="color" style="min-width:140px"><input class="b i fs color2" type="text"></span></div>
							<div class="t2"><span class="t de">Ресурсы</span><span class="t"><input class="b i fs color" type="color"><input class="b i fs color2" type="text"></span></div>
							<div class="t2"><span class="t de">Цель</span><span class="t"><input class="b i fs color" type="color"><input class="b i fs color2" type="text"></span></div>
							<div class="t2"><span class="t de">Контрмера</span><span class="t"><input class="b i fs color" type="color"><input class="b i fs color2" type="text"></span></div>
							<div class="t2"><span class="t de">Дестабилизатор</span><span class="t"><input class="b i fs color" type="color"><input class="b i fs color2" type="text"></span></div>
							<div class="t2"><span class="t de">Посредник</span><span class="t"><input class="b i fs color" type="color"><input class="b i fs color2" type="text"></span></div>
							<div class="t2"><span class="t de">Активный элемент (обводка)</span><span class="t"><input class="b i fs color" type="color" style="min-width:140px"><input class="b i fs color2" type="text"></span></div>
						</div></div>
					</div>
					<div class="pad" style="display:block">
						<div class="line" style="text-align:center;font-weight:700;font-size:120%;margin-bottom:8px">Поведение</div>
						<div class="line">Интервал автосохранения (0 - отключить): <input type="text" class="b i" id="st_autosave" style="width:1.5em">мин</div>
						<div class="line">
							<label class="b i stillsel ac" style="font-weight:normal"><input type="checkbox" id="st_autoload"> Автооткрытие последнего проекта</label>
							<label class="b i stillsel ac" style="font-weight:normal"><input type="checkbox" id="st_tooltips"> Подсвечивать действия</label>
						</div>
					</div>
					<div class="pad debug" style="display:block">
						<div class="line red" style="text-align:center;font-weight:700;font-size:120%;margin-bottom:8px">Расширенные настройки</div>
						<div class="line red">Изменяйте с осторожностью!</div>
						<div class="line">Интервал обновления: <input type="text" class="b i" id="st_debugInterval" style="width:1.5em">мс</div>
						<div class="line">Размер холста: <input type="text" class="b i" id="st_debugCanvasSize" style="width:2em">%</div>
					</div>
					<div class="pad" style="display:block">
						<div class="line">
							<div class="linebar" style="height:1.5em; line-height:1.5em;" title="Максимальный размер является приблизительным, и, в зависимости от браузера, может отличаться в большую сторону."><div class="sizes" style="font-size:70%"></div></div>
						</div><div class="table r"><div class="t3"><div class="t2">
							<span class="t"><span class="b fs red" onclick="api.loadDefault();api.putSettings();api.saveSettings()">Установить умолчания</span></span>
							<span class="t"><span class="b fs red" onclick="api.callPopup2({header:'Сброс данных',content:'Внимание, абсолютно все сохраненные данные будут потеряны! Текущая сессия будет завершена. Экспортированные данные не будут потеряны.',size:2,windowsize:'m',buttons:[{functions:'api.resetData();api.closePopup()',red:true,name:'Продолжить'},{functions:'api.closePopup()',name:'Отмена'}]})">Очистить хранилище</span></span>
						</div></div></div>
					</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t" style="width:33%"><span class="b fs" onclick="api.closeWindow('settings')">Отмена</span></span>
					<span class="t" style="width:34%"><span class="b fs" onclick="api.getSettings();api.saveSettings()">Применить</span></span>
					<span class="t" style="width:33%"><span class="b fs" onclick="api.getSettings();api.saveSettings();api.closeWindow('settings')">ОК</span></span>
				</div></div></div></div>
			</div>
		</div>

		<div id="project">
			<div class="w tall">
				<div class="h">
					<span>Проект</span>
				</div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns" style="text-align:center">
					<div class="pad" style="display:block">
						<div class="line" style="font-weight:700;font-size:120%;margin-bottom:8px">Информация</div>
						<div class="line">ID: <input type="text" class="b i" id="m_id" style="width:10em" disabled></div>
						<div class="line de">Описание: <textarea class="b i" id="m_descript" style="width:calc(100% - 8px - 0.5em); max-width:calc(100% - 8px - 0.5em);max-height:4em"></textarea></div>
					</div>
					<div class="pad" style="display:block" id="m_calcfunc">
						<div class="line" style="font-weight:700;font-size:120%;margin-bottom:8px">Способ расчета</div>
						<div class="line">Выбирайте в зависимости от цели построения когнитивной карты!</div>
						<label class="b ilb stillsel acr fs" style="font-weight:normal"><input type="radio" name="m_cf" value="0"> Сравнение (стандартный)</label>
						<label class="b ilb stillsel acr fs" style="font-weight:normal"><input type="radio" name="m_cf" value="1"> Умножение</label>
					</div>
					<div class="pad debug">
						<div class="line">Создан: <input type="text" class="b i" id="m_ts_created" style="width:10em" disabled></div>
						<div class="line">Сохранен: <input type="text" class="b i" id="m_ts_saved" style="width:10em" disabled></div>
					</div>
					<div class="pad" style="display:block">
						<div class="bt"><div class="table r"><div class="t3"><div class="t2">
							<span class="t"><span class="b fs" onclick="api.callWindow('cases')">Кейсы</span></span>
							<span class="t"><span class="b fs" onclick="api.callWindow('terms')">Термы</span></span>
						</div></div></div></div>
					</div>
					<div class="pad" style="display:block">
						<div class="line" style="font-weight:700;font-size:120%;margin-bottom:8px">Настройки</div>
						<div class="pad" style="width:calc(50% - 10px);display:inline-block;text-align:left;border:none">
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="m_strict"> Строгий режим</label></div>
							<div class="line hd"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="m_propsize"> Пропорциональный размер элементов</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="m_propcolor"> Пропорциональный цвет связей</label></div>
							<div class="line">Пароль: <input type="password" class="b i" id="m_pass1" style="width:10em"></div> 
						</div>
						<div class="pad" style="width:calc(50% - 10px);display:inline-block;text-align:left;border:none">
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="m_compress"> Сжатие проекта</label></div>
							<div class="line"><label class="b ilb stillsel ac fs" style="font-weight:normal"><input type="checkbox" id="m_encrypt"> Шифрование</label></div>
							<div class="line">Повтор: <input type="password" class="b i" id="m_pass2" style="width:10em"></div>
						</div>
					</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs" onclick="api.closeWindow('project')">Отмена</span></span>
					<span class="t"><span class="b fs" onclick="api.getMetas()">Применить</span></span>
				</div></div></div></div>
			</div>
		</div>
		
		<div id="side">
			<div class="w side">
				<div class="hc">
					<span>Инструменты</span>
				</div>
				<div class="controls">
					<div onclick="api.switchWindowState(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-window-minimize"></i></div>
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc" data-tab-id="side">
					<div class="table ps"><div class="t3"><div class="t2">
						<span class="t"><span class="b fs sel" data-tab-select="1" data-tab-id="side">Граф</span></span>
						<span class="t"><span class="b fs" data-tab-select="2" data-tab-id="side">Массовое</span></span>
						<span class="t"><span class="b fs" data-tab-select="3" data-tab-id="side">Вид</span></span>
					</div></div></div>
					
					<div data-tab="1" data-tab-id="side" class="pad" style="display:block">
					
						<div class="line">Факторы
							<div class="table r"><div class="t3">
							<div class="t2"><span class="t"><span class="b fs" id="brush1" onclick="api.selectBrush(1)">Угрозы</span></span>
							<span class="t"><span class="b fs" id="brush2" onclick="api.selectBrush(2)">Ресурсы</span></span></div>
							<div class="t2"><span class="t"><span class="b fs" id="brush6" onclick="api.selectBrush(6)">Посредник</span></span>
							<span class="t"><span class="b fs" id="brush3" onclick="api.selectBrush(3)">Цель</span></span></div>
							<div class="t2"><span class="t"><span class="b fs" id="brush4" onclick="api.selectBrush(4)">Контрмера</span></span>
							<span class="t"><span class="b fs" id="brush5" onclick="api.selectBrush(5)">Дестабилизатор</span></span></div>
							</div></div>
							
							<span class="de l">Редактирование</span>
							<div class="table r"><div class="t3"><div class="t2">
								<span class="t"><span class="b fs party_of_three" id="brush-1" onclick="api.selectBrush(-1)">Просмотр</span></span>
								<span class="t"><span class="b fs party_of_three" id="brush-2" onclick="api.selectBrush(-2)">Перемещение</span></span>
								<!--									VS								 -->
								<span class="t"><span class="b fs one_new_guy_who_wanna_remove_them_all" id="brush-4" onclick="api.selectBrush(-4)">Выбрать/переместить</span></span>
							</div></div></div>
							<span class="de l">Связи</span>
							<div class="table r"><div class="t3"><div class="t2">
								<span class="t"><span class="b fs party_of_three" id="brush-3" onclick="api.selectBrush(-3)">Просмотр</span></span>
								<span class="t"><span class="b fs" id="brush0" onclick="api.selectBrush(0)">Размещение</span></span>
							</div></div></div>
						</div>
						
					</div>
					
					<div data-tab="2" data-tab-id="side" class="pad">
						<span class="de l">Режим выделения</span>
						<div class="line" style="text-align:center">
							<div class="table r"><div class="t3">
							<div class="t2">
								<span class="t"><span class="b fs" id="brush-10" onclick="api.selectBrush(-10)">Замена</span></span>
								<span class="t"><span class="b fs" id="brush-11" onclick="api.selectBrush(-11)">Добавить</span></span>
							</div>
							<div class="t2">
								<span class="t"><span class="b fs" id="brush-12" onclick="api.selectBrush(-12)">Вычесть</span></span>
								<span class="t"><span class="b fs" id="brush-13" onclick="api.selectBrush(-13)">Пересечь</span></span>
							</div>
							</div></div>
						</div>
						<span class="de l">Действия с выделением</span>
						<div class="line" style="text-align:center">
							<span class="b fs" onclick="selection.selectAll()">Выделить все</span>
							<span class="b fs selectionRequired" onclick="selection.inverSelection()">Инвертировать</span>
							<div class="table r"><div class="t3">
							<div class="t2">
								<span class="de l">Повернуть</span>
							</div>
							<div class="t2">
								<span class="t"><span class="b fs selectionRequired" onclick="selection.rotate(false)">По часовой</span></span>
								<span class="t"><span class="b fs selectionRequired" onclick="selection.rotate(true)">Против часовой</span></span>
							</div>
							<div class="t2">
								<span class="de l">Отразить</span>
							</div>
							<div class="t2">
								<span class="t"><span class="b fs selectionRequired" onclick="selection.mirror(true)">По вертикали</span></span>
								<span class="t"><span class="b fs selectionRequired" onclick="selection.mirror(false)">По горизонтали</span></span>
							</div>
							</div></div>
						</div>
						<div class="line" style="text-align:center">&nbsp;</div>
						<div class="line" style="text-align:center">
							<span class="b fs red selectionRequired" onclick="if (selection.stuffAllowed) api.callPopup2(windows.sureDeleteSelection)">Удалить</span>
						</div>
					</div>
					
					<div data-tab="3" data-tab-id="side" class="pad">
						<!--<div class="line" style="text-align:center">
							<span class="b fs" onclick="api.callWindow('matrix')">Матрица достижимости</span>
							<span class="b fs" onclick="api.callWindow('effect')">Полный эффект</span>
							<span class="b fs" onclick="api.callWindow('graphs')">Общий риск</span>
						</div>
						<div class="line" style="text-align:center">
							<span class="b fs" id="project_button" onclick="api.callWindow('project')">Настройки проекта</span>
						</div>-->
						<div class="line">
							<div class="pad" style="display:block">
								<span class="de l">Отображение</span>
								<label class="b ilb stillsel ac fs rtm project" name="propColor" style="font-weight:normal"><input type="checkbox"> Пропорциональный цвет связей</label>
								<label class="b ilb stillsel ac fs rtm api" name="elemLabels" style="font-weight:normal"><input type="checkbox"> Подписи у элементов</label>
								<label class="b ilb stillsel ac fs rtm api" name="activeElems" style="font-weight:normal"><input type="checkbox"> Подписи только активных</label>
								<label class="b ilb stillsel ac fs rtm api" name="actualNames" style="font-weight:normal"><input type="checkbox"> Имена вместо кодов</label>
							</div>
							
							<div class="pad" style="display:block">
								<span class="de l">Текущий кейс</span>
								<div id="RTS_cases"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="save">
			<div class="back"></div>
			<div class="w huge">
				<div class="hc">
					<span>Сохранить</span>
				</div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns">
					<div id="savelist" class="pad selection" style="display:block;float:left;width:calc(100% - 30em - 16px);height:calc(100% - 8px)"></div>
					<div id="savepad" class="pad" style="display:block;float:left;width:30em;height:calc(100% - 8px);white-space:pre-wrap;word-wrap:break-word"></div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs" onclick="api.closeWindow('save')">Отмена</span></span>
					<span class="t"><span class="b fs" onclick="api.trySave()">Сохранить</span></span>
				</div></div></div></div>
			</div>
		</div>
		
		<div id="effect">
			<div class="back"></div>
			<div class="w huge">
				<div class="hc">
					<span>Полный эффект</span>
				</div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="bt up">
					<div style="float:left;width:calc(15em - 8px);white-space:pre-wrap;word-wrap:break-word;padding:4px">&nbsp;</div>
					<div id="effectbutt1" style="float:left;width:calc(50% - 7.5em);white-space:pre-wrap;word-wrap:break-word"></div>
					<div id="effectbutt2" style="float:left;width:calc(50% - 7.5em);white-space:pre-wrap;word-wrap:break-word"></div>
				</div>
				<div class="cc btns" style="width:calc(100% - 8px)">
					<div id="effectlist" class="pad selection" style="display:block;float:left;width:calc(15em - 8px);min-height:calc(100% - 8px);white-space:pre-wrap;word-wrap:break-word"></div>
					<div id="effectpad1" class="pad" style="display:block;float:left;width:calc(50% - 7.5em - 12px);min-height:calc(100% - 8px)"></div>
					<div id="effectpad2" class="pad" style="display:block;float:left;width:calc(50% - 7.5em - 12px);min-height:calc(100% - 8px)"></div>
				</div>
			</div>
		</div>
		
		<div id="matrix">
			<div class="back"></div>
			<div class="w huge">
				<div class="hc">
					<span>Матрица достижимости</span>
				</div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="bt up">
					<div id="matrixbutt" style="float:left;width:100%);white-space:pre-wrap;word-wrap:break-word"> </div>
				</div>
				<div class="cc btns" style="width:calc(100% - 8px)">
					<div id="matrixpad" class="pad" style="display:block;height:calc(100% - 6px);white-space:pre-wrap;word-wrap:break-word;border:none;overflow:auto"></div>
				</div>
			</div>
		</div>
		
		<div id="cases">
			<div class="back"></div>
			<div class="w huge defhuge">
				<div class="h"><span>Кейсы</span></div>
				<div class="hc"><span>Кейсы</span></div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns">
					<div id="caselist" class="pad" style="display:block;float:left;width:20em;height:calc(100% - 8px);white-space:pre-wrap;word-wrap:break-word"></div>
					<div id="caseoptions" class="pad selection" style="display:block;float:left;width:calc(100% - 40em - 24px);height:calc(100% - 8px)"></div>
					<div id="caseinfo" class="pad" style="display:block;float:left;width:20em;height:calc(100% - 8px);white-space:pre-wrap;word-wrap:break-word">
						<div class="line">Имя: <input type="text" class="b i" id="cs_name" style="width:10em"></div>
						<div class="line">Суммарная стоимость: <input type="text" class="b i" id="cs_cost" style="width:6em" disabled></div>
						<div class="line"><div class="b red" id="cs_del">Удалить</div></div>
					</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs" onclick="api.closeWindow('cases')">Закрыть</span></span>
				</div></div></div></div>
			</div>
		</div>
		
		<div id="terms">
			<div class="back"></div>
			<div class="w huge defhuge" data-tab-id="terms">
				<div class="h"><span>Термы</span></div>
				<div class="hc"><span>Термы</span></div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow('terms')"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="bt up">
					<div class="table ps"><div class="t3"><div class="t2">
						<span class="t"><span class="b fs sel" data-tab-select="1" data-tab-id="terms">Лингвистические термы</span></span>
						<span class="t"><span class="b fs" data-tab-select="2" data-tab-id="terms" onclick="api.renderTermRules();">База правил</span></span>
					</div></div></div>
				</div>
				<div class="cc btnsdouble">
					<div data-tab="1" data-tab-id="terms" style="height:100%">
						<div id="termlist" class="pad" style="display:block;float:left;width:20em;height:calc(100% - 8px);white-space:pre-wrap;word-wrap:break-word"></div>
						<div id="termoptions" class="pad selection" style="display:block;float:left;width:calc(100% - 40em - 24px);height:calc(100% - 8px)"></div>
						<div id="terminfo" class="pad" style="display:block;float:left;width:20em;height:calc(100% - 8px);white-space:pre-wrap;word-wrap:break-word">
							<div class="line">Имя: <input type="text" class="b i" id="t_name" style="width:10em"></div>
							<div class="line"><div class="b red" id="t_del">Удалить</div></div>
						</div>
					</div>
					<div data-tab="2" data-tab-id="terms" style="display:none;height:100%">
						<div id="termrules" class="pad selection" style="display:block;height:calc(100% - 8px)"><div></div></div>
					</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs" onclick="api.closeWindow('terms')">Закрыть</span></span>
				</div></div></div></div>
			</div>
		</div>
		
		
		<div id="load">
			<div class="back"></div>
			<div class="w huge">
				<div class="hc">
					<span>Открыть</span>
				</div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns">
					<div id="loadlist" class="pad selection" style="display:block;float:left;width:calc(100% - 30em - 16px);height:calc(100% - 8px)"></div>
					<div id="loadpad" class="pad" style="display:block;float:left;width:30em;height:calc(100% - 8px);white-space:pre-wrap;word-wrap:break-word"></div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs" onclick="api.closeWindow('load')">Отмена</span></span>
					<span class="t"><span class="b fs red" onclick="api.callPopup2(windows.deleteSave)">Удалить</span></span>
					<span class="t"><span class="b fs" onclick="api.tryLoad()">Открыть</span></span>
				</div></div></div></div>
			</div>
		</div>
		
		<div id="export">
			<div class="back"></div>
			<div class="w m">
				<div class="hc"><span>Экспорт</span></div>
				<div class="h"><span>Экспорт</span></div>
				<div class="controls">
					<div class="rsz" onclick="api.switchWindowSize(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-window-maximize"></i><i class="fa fa-window-restore"></i></div>
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns">
					<textarea type="text" class="b i ex_c" style="width:calc(100% - 8px - 0.5em); max-width:calc(100% - 8px - 0.5em);max-height:90%;height:70%"></textarea>
					<div class="line exportlink"></div>
					<div class="line">Скопируйте содержимое блока сверху и вручную создайте текстовый файл с ним. <br>Также можете нажать кнопку "Скачать" и получить готовый файл. Возможно, сохранить его придется вручную.</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs" onclick="api.closeWindow('export')">Закрыть</span></span>
					<span class="t"><span class="b fs" onclick="api.exportProject()">Скачать</span></span>
				</div></div></div></div>
			</div>
		</div>
		
		<div id="import">
			<div class="back"></div>
			<div class="w m">
				<div class="hc"><span>Импорт</span></div>
				<div class="h"><span>Импорт</span></div>
				<div class="controls">
					<div class="rsz" onclick="api.switchWindowSize(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-window-maximize"></i><i class="fa fa-window-restore"></i></div>
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns">
					<textarea type="text" class="b i im_c" style="width:calc(100% - 8px - 0.5em); max-width:calc(100% - 8px - 0.5em);max-height:90%;height:70%"></textarea>
					<div class="line">Скопируйте код проекта в блок сверху или просто перетащите файл с проектом.</div>
					<div class="line" id="importpad"></div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs" onclick="api.closeWindow('import')">Закрыть</span></span>
					<span class="t"><span class="b fs" onclick="api.importProject()">Открыть</span></span>
				</div></div></div></div>
			</div>
		</div>
		
		<div id="graphs">
			<div class="back"></div>
			<div class="w huge">
				<div class="hc"><span>Общий риск</span></div>
				<div class="controls">
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc">
					<div class="pad bl scale" id="graphscale" style="margin-left:calc(20em + 6px);width:calc(100% - 20em - 12px);border:none"></div>
					<div class="pad bl" id="graphlist" style="width:20em;border:none;float:left;padding:0 0 0 6px"></div>
					<div class="pad bl" id="graphpad" style="width:calc(100% - 20em - 6px);padding:0;border:none;float:left"></div>
					<div class="pad bl" style="float:left">Красным цветом обозначены риски; желтым или рыжим — затраты на защитные меры или нейтрализацию дестабилизаторов.</div>
				</div>
			</div>
		</div>
		
		<div id="inst">
			<div class="back"></div>
			<div class="w tall">
				<div class="h">
					<span>Создать</span>
				</div>
				<div class="cc btns" style="text-align:center">
					<div class="pad" style="display:block">
						<div class="line" style="font-weight:700;font-size:120%;margin-bottom:8px">Концепт</div>
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:17%">ID: <input type="text" class="b i na" data-no-edit data-val="id" style="width:calc(100% - 3em)" disabled></div>
							<div class="t de" style="width:58%">Имя: <input type="text" class="b i" data-val="name" data-parse="string"  style="width:calc(100% - 4em)"></div>
							<div class="t de" style="width:25%">Код: <input type="text" class="b i na" data-no-edit data-special-input="getCode(el.id)" data-val="code" data-write-only="true" style="width:calc(100% - 4em)" disabled></div>
						</div></div></div>
						<div class="line de">Детальное описание: <textarea type="text" class="b i" data-val="desc" data-parse="string" style="width:calc(100% - 8px - 0.5em); max-width:calc(100% - 8px - 0.5em);max-height:4em"></textarea></div>
						<div class="line de" data-display-types="[2, 3, 6]">
							Навязанный вес: 
							<input type="checkbox" style="display:inline" data-val="forced" id="b i"> 
							<input type="text" data-mark="[data-val=&quot;forced&quot;]" class="b i" data-val="fval" style="width:4em">
							<select size="1" data-val="ftval" data-mark="[data-val=&quot;forced&quot;]" class="b ilb cc_ft_value termsrender"></select>
						</div>
					</div>
					<div class="pad" data-display-types="[1, 2]">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Состояние: <input type="text" class="b i na" data-no-edit data-val="state" data-parse="int" data-default="1" style="width:3em" disabled></div>
							<div class="t de" style="width:50%">Предельное: <input type="text" class="b i na" data-no-edit data-val="limit" data-parse="int" data-default="1" style="width:3em" disabled></div>
						</div></div></div>
					</div>
					<div class="pad" data-display-types="[3]">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Стоимость: <input type="text" class="b i" data-val="cost" data-parse="int" data-default="0" style="width:4em"></div>
							<div class="t de" style="width:50%">Значимость: <input type="text" class="b i" data-val="val" data-parse="int" data-default="1" style="width:4em"></div>
						</div></div></div>
					</div>
					<div class="pad" data-display-types="[4, 5]">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Стоимость: <input type="text" class="b i" data-val="cost" data-parse="int" data-default="0" style="width:4em"></div>
							<div class="t de" style="width:50%">Эффективность: 
								<input type="text" class="b i" data-val="val" data-default="0.5" data-parse="float" style="width:4em">
								<select size="1" data-val="tval" data-parse="int" class="b ilb termsrender"></select>
							</div>
						</div></div></div>
						<div class="line" style="font-size:120%">
							Копия <select size="1" class="b ilb cc_alias" data-val="alias"></select>
						</div>
						<div class="line">
							Если выбрано, все остальные настройки будут приведены к элементу-исходнику.
						</div>
					</div>
					<div class="pad debug">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:38%">X: <input type="text" class="b i" data-val="X" style="width:4em"></div>
							<div class="t de" style="width:38%">Y: <input type="text" class="b i" data-val="Y" style="width:4em"></div>
							<div class="t de" style="width:24%">Тип: <input type="text" class="b i na" data-no-edit data-val="type" data-parse="int" style="width:2em" disabled></div>
						</div></div></div>
					</div>
					<div class="pad" style="display:block">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:30%">Размер %: <input type="text" class="b i" data-val="z" data-special-input="(thisValue*100)" data-default="100" data-special-output="(thisValue/100)" data-parse="int" style="width:4em"></div>
							<div class="t de" style="width:30%">Цвет: <input type="text" class="b i color2" data-val="privateColor" data-parse="string" data-read-condition="!api.settings.palette" data-special-output="(thisValue==api.settings.color[el.type-1]?0:thisValue)" style="width:6em">
							<input type="checkbox" class="b i color cc_color_check"> 
							<input type="color" class="b i color" data-mark=".cc_color_check" data-parse="string" data-val="privateColor" data-read-condition="api.settings.palette" data-special-output="(thisValue==api.settings.color[el.type-1]?0:thisValue)" style="width:5em"></div>
						</div></div></div>
					</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs _сс_close2" onclick="cancelCreation();api.closeWindow('inst')">Отмена</span></span>
					<span class="t"><span class="b fs _сс_apply" onclick="createAndAddElement('inst', false);api.closeWindow('inst')">Применить</span></span>
				</div></div></div></div>
			</div>
		</div>
	
		<div id="instb">
			<div class="back"></div>
			<div class="w sm">
				<div class="h">
					<span>Связь</span>
				</div>
				<div class="cc btns" style="text-align:center">
					<div class="pad" style="display:block">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:29%">ID: <input type="text" class="b i na cc_id" data-no-edit data-val="id" style="width:2em" disabled></div>
							<div class="t de" style="width:35%">Начало: <input type="text" class="b i" data-val="first" style="width:3em" disabled></div>
							<div class="t de" style="width:36%">Конец: <input type="text" class="b i" data-val="second" style="width:3em" disabled></div>
						</div></div></div>
						<br>
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Сила: 
								<input type="text" class="b i" data-val="val" style="width:3em">
								<select size="1" data-val="tval" class="b ilb termsrender"></select>
							</div>
							<label class="b ilb stillsel ac t de" style="font-weight:normal"><input type="checkbox" data-val="forced"> Не перезаписывать</label>
						</div></div></div>
					</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs _сс_close2" onclick="cancelCreationBond();api.closeWindow('instb')">Отмена</span></span>
					<span class="t"><span class="b fs _сс_apply" onclick="createAndAddBond('instb', false);api.closeWindow('instb')">Применить</span></span>
				</div></div></div></div>
			</div>
		</div>
	
	</div>
	<div id="data" style="display:none">
		<div id="_editb_template_">
			<div class="back hd"></div>
			<div class="w sm2">
				<div class="h"><span>Связь</span></div>
				<div class="hc"><span>Связь</span></div>
				<div class="controls">
					<div onclick="api.switchWindowState(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-window-minimize"></i></div>
					<div class="rsz" onclick="api.switchWindowSize(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-window-maximize"></i><i class="fa fa-window-restore"></i></div>
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns" style="text-align:center">
					<div class="pad" style="display:block">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:29%">ID: <input type="text" class="b i na cc_id" data-no-edit data-val="id" style="width:2em" disabled></div>
							<div class="t de" style="width:35%">Начало: <input type="text" class="b i" data-val="first" style="width:3em" disabled></div>
							<div class="t de" style="width:36%">Конец: <input type="text" class="b i" data-val="second" style="width:3em" disabled></div>
						</div></div></div>
						<br>
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Сила: 
								<input type="text" class="b i" data-val="val" style="width:3em">
								<select size="1" data-val="tval" class="b ilb termsrender"></select>
							</div>
							<label class="b ilb stillsel ac t de" style="font-weight:normal"><input type="checkbox" data-val="forced"> Не перезаписывать</label>
						</div></div></div>
					</div>
					<div class="pad selection elist" style="display:block"><table class="r" cellspacing="0" rules="all">
						
					</table></div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs _сс_delete red">Удалить</span></span>
					<span class="t"><span class="b fs _сс_close2">Отмена</span></span>
					<span class="t"><span class="b fs _сс_apply">Применить</span></span>
				</div></div></div></div>
			</div>
		</div>
	
		<div id="_edit_template_">
			<div class="back hd"></div>
			<div class="w sm">
				<div class="h"><span>Свойства</span></div>
				<div class="hc"><span>Свойства</span></div>
				<div class="controls">
					<div onclick="api.switchWindowState(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-window-minimize"></i></div>
					<div class="rsz" onclick="api.switchWindowSize(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-window-maximize"></i><i class="fa fa-window-restore"></i></div>
					<div class="close" onclick="api.closeWindow(this.parentNode.parentNode.parentNode.id)"><i class="fa fa-lg fa-close"></i></div>
				</div>
				<div class="cc btns" style="text-align:center">
					<div class="pad" style="display:block">
						<div class="line" style="font-weight:700;font-size:120%;margin-bottom:8px">Концепт</div>
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:17%">ID: <input type="text" class="b i na cc_id" data-val="id" data-no-edit style="width:calc(100% - 3em)" disabled></div>
							<div class="t de" style="width:58%">Имя: <input type="text" class="b i" data-val="name" data-parse="string"  style="width:calc(100% - 4em)"></div>
							<div class="t de" style="width:25%">Код: <input type="text" class="b i na" data-val="code" data-special-input="getCode(el.id)" data-no-edit data-write-only="true" style="width:calc(100% - 4em)" disabled></div>
						</div></div></div>
						<div class="line de">Детальное описание: <textarea type="text" class="b i" data-val="desc" data-parse="string" style="width:calc(100% - 8px - 0.5em); max-width:calc(100% - 8px - 0.5em);max-height:4em"></textarea></div>
						<div class="line de" data-display-types="[2, 3, 6]">
							Навязанный вес: 
							<input type="checkbox" style="display:inline" data-val="forced"> 
							<input type="text" data-mark="[data-val=&quot;forced&quot;]" class="b i" data-val="fval" style="width:4em">
							<select size="1" data-mark="[data-val=&quot;forced&quot;]" data-val="ftval" class="b ilb cc_ft_value termsrender"></select>
						</div>
					</div>
					<div class="pad" data-display-types="[1, 2]">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Состояние: <input type="text" class="b i na" data-val="state" style="width:3em" disabled></div>
							<div class="t de" style="width:50%">Предельное: <input type="text" class="b i na" data-val="limit" style="width:3em" disabled></div>
						</div></div></div>
					</div>
					<div class="pad" data-display-types="[3]">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Стоимость: <input type="text" class="b i" data-val="cost" style="width:4em"></div>
							<div class="t de" style="width:50%">Значимость: <input type="text" class="b i" data-val="val" style="width:4em"></div>
						</div></div></div>
					</div>
					<div class="pad" data-display-types="[4, 5]">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:50%">Стоимость: <input type="text" class="b i" data-val="cost" style="width:4em"></div>
							<div class="t de" style="width:50%">Эффективность: 
								<input type="text" class="b i" data-val="val" data-parse="float" style="width:4em">
								<select size="1" data-val="tval" data-parse="int" class="b ilb termsrender"></select>
							</div>
						</div></div></div>
						<div class="line" style="font-size:120%">
							Копия <select size="1" class="b ilb cc_alias" data-val="alias"></select>
						</div>
						<div class="line">
							Если выбрано, все остальные настройки будут приведены к элементу-исходнику.
						</div>
						<div class="pad coplist" style="display:block">
					
						</div>
					</div>
					<div class="pad debug">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:38%">X: <input type="text" class="b i" data-val="X" style="width:4em"></div>
							<div class="t de" style="width:38%">Y: <input type="text" class="b i" data-val="Y" style="width:4em"></div>
							<div class="t de" style="width:24%">Тип: <input type="text" class="b i na" data-no-edit data-val="type" data-parse="int" style="width:2em" disabled></div>
						</div></div></div>
					</div>
					<div class="pad" style="display:block">
						<div class="table r"><div class="t3"><div class="t2">
							<div class="t de" style="width:30%">Размер %: <input type="text" class="b i" data-val="z" data-special-input="(thisValue*100)" data-default="100" data-special-output="(thisValue/100)" data-parse="int" style="width:4em"></div>
							<div class="t de" style="width:30%">Цвет: <input type="text" class="b i color2" data-val="privateColor" data-parse="string" data-read-condition="!api.settings.palette" data-special-output="(thisValue==api.settings.color[el.type-1]?0:thisValue)" style="width:6em">
							<input type="checkbox" class="b i color cc_color_check">
							<input type="color" class="b i color" data-mark=".cc_color_check" data-parse="string" data-val="privateColor" data-read-condition="api.settings.palette" data-special-output="(thisValue==api.settings.color[el.type-1]?0:thisValue)" style="width:5em"></div>
						</div></div></div>
					</div>
					<div class="pad selection blist" style="display:block"><table class="r" cellspacing="0" rules="all">
						
					</table></div>
					<div class="pad ellist" style="display:block">
					
					</div>
				</div>
				<div class="bt"><div class="table r"><div class="t3"><div class="t2">
					<span class="t"><span class="b fs _сс_delete red">Удалить</span></span>
					<span class="t"><span class="b fs _сс_close2">Отмена</span></span>
					<span class="t"><span class="b fs _сс_apply">Применить</span></span>
				</div></div></div></div>
			</div>
		</div>
	</div>
</body>
</html>